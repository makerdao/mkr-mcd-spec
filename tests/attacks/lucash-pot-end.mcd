// Initialize gold Gem and GemJoin
transact ADMIN Gem "gold" . init
transact ADMIN Gem "gold" . initUser "Alice"
transact ADMIN Gem "gold" . initUser "Bobby"
transact ADMIN Gem "gold" . mint "Alice" 10
transact ADMIN Gem "gold" . mint "Bobby" 10
transact ADMIN GemJoin "gold" . init

// Initialize Spot for gold
transact ADMIN Spot . init     "gold"
transact ADMIN Spot . setPrice "gold" 1

// Initialize Pot
transact ADMIN Pot . file vow-file "VOW"
transact ADMIN Pot . initUser "Alice"
transact ADMIN Pot . initUser "Bobby"

// Initialize Vat, both total Line and gold parameters
transact ADMIN Vat . file Line 1000 ether
transact ADMIN Vat . initIlk "gold"
transact ADMIN Vat . file spot "gold" 3 ether
transact ADMIN Vat . file line "gold" 1000 ether

// Initialize "VOW", "FLAP", "END" addresses for Vat.
transact ADMIN Vat . initUser "VOW"
transact ADMIN Vat . initUser "POT"
transact ADMIN Vat . initUser "FLAP"
transact ADMIN Vat . initUser "END"
transact ADMIN Vat . initGem "gold" "END"

// Initialize users Alice and Bob with gold Gem
transact ADMIN Vat . initUser "Alice"
transact ADMIN Vat . initGem "gold" "Alice"
transact ADMIN Vat . initCDP "gold" "Alice"
transact "Alice" Vat . hope "POT"

transact ADMIN Vat . initUser "Bobby"
transact ADMIN Vat . initGem "gold" "Bobby"
transact ADMIN Vat . initCDP "gold" "Bobby"
transact "Bobby" Vat . hope "POT"

// Setup CDPs
transact "Alice" GemJoin "gold" . join "Alice" 10
transact "Bobby" GemJoin "gold" . join "Bobby" 10
transact "Alice" Vat . frob "gold" "Alice" "Alice" "Alice" 10 10
transact "Bobby" Vat . frob "gold" "Bobby" "Bobby" "Bobby" 10 10

// Attack sequence
transact ADMIN End . cage
transact ADMIN End . cage "gold"
transact ADMIN End . initGap "gold"       // injected because no default setting of `gap` to 0
transact ADMIN End . skim "gold" "Alice"
transact ADMIN End . skim "gold" "Bobby"
transact ADMIN End . thaw
transact ADMIN End . flow "gold"
transact "Alice" Pot . join 10
transact ADMIN Pot . file dsr 2
TimeStep 1 second
transact "Alice" Pot . drip
transact "Alice" Pot . exit 10
.MCDSteps
