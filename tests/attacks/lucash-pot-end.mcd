// Add an authorized account
authorize "Admin"

// Initialize gold Gem and GemJoin
transact "Admin" Gem "gold" . init
transact "Admin" Gem "gold" . initUser "Alice"
transact "Admin" Gem "gold" . initUser "Bobby"
transact "Admin" Gem "gold" . mint "Alice" 10
transact "Admin" Gem "gold" . mint "Bobby" 10
transact "Admin" GemJoin "gold" . init

// Initialize Vat, both total Line and gold parameters
transact "Admin" Vat . file Line 1000 ether
transact "Admin" Vat . initIlk "gold"
transact "Admin" Vat . file spot "gold" 3 ether
transact "Admin" Vat . file line "gold" 1000 ether

// Initialize "VOW" and "FLAP" addresses for Vat.
transact "Admin" Vat . initUser "VOW"
transact "Admin" Vat . initUser "FLAP"

// Initialize users Alice and Bob with gold Gem
transact "Admin" Vat . initUser "Alice"
transact "Admin" Vat . initUser "Bobby"
transact "Admin" Vat . initCDP "gold" "Alice"
transact "Admin" Vat . initCDP "gold" "Bobby"

// Setup CDPs
transact "Alice" GemJoin "gold" . join "Alice" 10
transact "Bobby" GemJoin "gold" . join "Bobby" 10
transact "Alice" Vat . frob "gold" "Alice" "Alice" "Alice" 10 10
transact "Bobby" Vat . frob "gold" "Bobby" "Bobby" "Bobby" 10 10

// Attack sequence
transact "Admin" End . cage
transact "Admin" End . cage "gold"
transact "Admin" End . skim "gold" "Alice"
transact "Admin" End . skim "gold" "Bobby"
transact "Admin" End . thaw
transact "Admin" End . flow "gold"
transact "Alice" Pot . drip
.MCDSteps
